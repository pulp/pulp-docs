name: "pulp-docs CI"

on:
  pull_request:

concurrency:
  group: "main-${{ github.ref_name }}-${{ github.workflow }}"
  cancel-in-progress: true

jobs:
  docs:
    runs-on: "ubuntu-latest"
    steps:
      - uses: "actions/checkout@v4"
        with:
          path: "pulp-docs"
          fetch-depth: 0

      - run: |
          echo "$PWD"
          ls

      - uses: "./pulp-docs/.github/actions/pulp-docs-ci"
        with:
          repository_name: "pulp-docs"

  # tests:
    # uses: "./.github/workflows/tests.yml"

  # ready-to-ship:
  #   # This is a dummy dependent task to have a single entry for the branch protection rules.
  #   runs-on: "ubuntu-latest"
  #   needs:
  #     - "docs"
  #     - "tests"
  #   if: "always()"
  #   steps:
  #     - name: "Collect needed jobs results"
  #       run: |
  #         echo '${{toJson(needs)}}' | jq -r 'to_entries[]|select(.value.result!="success")|.key + ": " + .value.result'
  #         echo '${{toJson(needs)}}' | jq -e 'to_entries|map(select(.value.result!="success"))|length == 0'
  #         echo "CI says: Looks good!"
